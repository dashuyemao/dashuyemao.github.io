/* global bookstrap: false */
define([
  'underscore'
  ],
  function(_) {

    var BookstrapNavButtons = function() {
      bookstrap.on('pageload', _.bind(this.onPageLoad, this));
      this.createButtons();
    };

    BookstrapNavButtons.prototype.createButtons = function() {
      var buttonPrevious = $('<a href="#" class="nav-button-prev" rel="previous"><i class="book-icon-bigleftarrow"></i></a>'),
          buttonNext = $('<a href="#" class="nav-button-next" rel="next"><i class="book-icon-bigrightarrow"></i></a>');

      bookstrap.viewport.$el.find('a.nav-button-next, a.nav-button-prev').remove();
      bookstrap.viewport.$el.after(buttonPrevious).after(buttonNext);
      this.buttonPrevious = buttonPrevious;
      this.buttonNext = buttonNext;
    };

    BookstrapNavButtons.prototype.onPageLoad = function(domPage) {
      if (bookstrap.hasPrevious()) {
        this.buttonPrevious.removeClass('nav-button-disabled');
      } else {
        this.buttonPrevious.addClass('nav-button-disabled');
      }
      if (bookstrap.hasNext()) {
        this.buttonNext.removeClass('nav-button-disabled');
      } else {
        this.buttonNext.addClass('nav-button-disabled');
      }
    };

    return BookstrapNavButtons;
});