/*global bookstrap: false */
define([
  'underscore'
  ],
  function(_) {

    var PageCollection = function($el) {
      this.$el = $el;
      this.pages = [];
    };

    PageCollection.prototype.getNext = function(index) {
      return this.get(index+1);
    };

    PageCollection.prototype.getPrevious = function(index) {
      return this.get(index-1);
    };

    PageCollection.prototype.getFirst = function() {
      return this.get(0);
    };

    PageCollection.prototype.getLast = function() {
      return this.get(this.pages.length-1);
    };

    PageCollection.prototype.push = function(page) {
      this.pages.push(page);
    };

    PageCollection.prototype.indexOf = function(page) {
      return this.pages.indexOf(page);
    };

    PageCollection.prototype.forEach = function(page) {
      return this.pages.forEach(page);
    };

    PageCollection.prototype.get = function(index) {
      return this.pages[index];
    };

    PageCollection.prototype.findByURL = function(url) {
      for (var i=0; i < this.pages.length; i++) {
        if (this.pages[i].href === url)
          return this.pages[i];
      }
      return null;
    };

    // Returns a copy of the array with all instances of the values removed.
    PageCollection.prototype.difference = function(array) {
      return _.difference(this.pages, array);
    };

    PageCollection.prototype.getLength = function() {
      return this.pages.length;
    };

    // PageCollection.prototype.__defineGetter__("length", function() {
    //   return this.pages.length;
    // });

    return PageCollection;
});