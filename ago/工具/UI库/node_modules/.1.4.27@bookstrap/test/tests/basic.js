define([
  'Bookstrap.Core',
  'Bookstrap.PageCollection',
  'Bookstrap.Page',
  'Bookstrap.DOMPage'
  ],
  function(Bookstrap, PageCollection, Page, DOMPage) {

    beforeEach(function() {
      window.bookstrap = new Bookstrap();
    });

    describe('Initialization', function () {

      it('should have 5 pages', function (done) {
        bookstrap.on('pageload', function() {
          expect(bookstrap.pages).to.be.an(PageCollection);
          expect(bookstrap.pages.length).to.eql(5);
          done();
        });
        bookstrap.init();
      });

      it('should have correct first page', function (done) {
        bookstrap.on('pageload', function() {
          expect(bookstrap.domPages.current.page.href).to.eql('page1.html');
          done();
        });
        bookstrap.init();
      });

      it('should fire 1 pageload event after initialization', function (done) {
        bookstrap.on('pageload', function() {
          expect(true).to.be.ok();
          done();
        });
        bookstrap.init();
      });

    });

  }
);